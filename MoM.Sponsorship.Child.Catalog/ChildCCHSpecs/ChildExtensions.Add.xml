<AddDataFormTemplateSpec
    xmlns="bb_appfx_adddataformtemplate"
    xmlns:common="bb_appfx_commontypes"
    ID="491f51d2-e3a8-4541-8990-75ff5a666d89"
    Name="ChildExtensions Add Data Form"
    Description="Child Extension Form"
    Author="memphis-PC\Administrator"
    DataFormInstanceID="51e41274-0cb7-4655-b808-8c4afa545bdb"
    RecordType="Child Extension"
    common:SecurityUIFolder="Sponsorship\Opportunity\Child"
    FormHeader="Add CCH Data"
    >

  <SPDataForm>
    <!-- describe the preload SP (if applicable), which should be used to fetch field default values from the database.  If no
		preload is needed, then this section can be removed -->
    <!--<LoadImplementation SPName="USP_DATAFORMTEMPLATE_ADD_CHILD_PRELOAD">
			<common:CreateProcedureSQL>
				<![CDATA[
create procedure dbo.USP_DATAFORMTEMPLATE_ADD_CHILD_PRELOAD
(
	@CONTEXTID uniqueidentifier,
	@FIELD1 nvarchar(10) = null output
)
as
	set nocount on;
		
	//populate the fields that have default values that should be fetched from the database
	select @FIELD1 = FIELD1
	from dbo.SOMETABLE
	where ID = @CONTEXTID
	
	return 0;				
				]]>
			</common:CreateProcedureSQL>
		</LoadImplementation>-->

    <!-- describe the save SP -->
    <SaveImplementation SPName="USP_DATAFORMTEMPLATE_ADD_CHILDEXTENSION">
      <common:CreateProcedureSQL>
        <![CDATA[
create procedure dbo.USP_DATAFORMTEMPLATE_ADD_CHILDEXTENSION
(
    @ID uniqueidentifier = null output,
    @SPONSORSHIPOPPORTUNITYCHILDID uniqueidentifier,
    @CHANGEAGENTID uniqueidentifier = null,
	  @PROGRAMCOMPLETIONDATE datetime = null,
	  @NUMBEROFSISTERS tinyint = null,
	  @NUMBEROFBROTHERS tinyint = null,
    @CHILDLIVESWITHCODEID uniqueidentifier = null,
    @FATHERWORKSASCODEID uniqueidentifier =  null,
    @MOTHERWORKSASCODEID uniqueidentifier = null,
    @CAREGIVERRELATIONCODEID uniqueidentifier = null,
    @CAREGIVERREASONCODEID uniqueidentifier = null,
    @BIRTHDATEACCURACYCODEID uniqueidentifier = null,
    @FATHERWORKSASOTHER nvarchar(50) = '',
    @MOTHERWORKSASOTHER nvarchar(50) = '',
    @CAREGIVERRELATIONOTHER nvarchar(50) = '',
    @CAREGIVERWORKSASCODEID uniqueidentifier = null,
    @CAREGIVERWORKSASOTHER nvarchar(50) = '',
    @REASONFORCAREGIVEROTHER nvarchar(50) = '',
    @HOUSINGWALLSTRUCTURECODEID uniqueidentifier = null,
    @HOUSINGWALLSTRUCTUREOTHER nvarchar(50) = '',
    @HOUSINGROOFINGMATERIALCODEID uniqueidentifier = null,
    @HOUSINGROOFINGMATERIALOTHER nvarchar(50) = '',
    @WATERSOURCECODEID uniqueidentifier = null,
    @WATERSOURCEOTHER nvarchar(50) = '',
    @COOKINGSOURCECODEID uniqueidentifier = null,
    @COOKINGSOURCEOTHER nvarchar(50) = '',
    @LIGHTSOURCECODEID uniqueidentifier = null,
    @LIGHTSOURCEOTHER nvarchar(50) = '',
    @AREADESCRIPTION nvarchar(1000) = '',
    @MYFAVORITETHINGTODO nvarchar(1000) = '',
    @WHENIPLAYWITHFRIENDSWE nvarchar(1000) = '',
    @WHENATHOMEIHELPOUTBY nvarchar(1000) = '',
    @WHENITALKTOGODIASKHIM nvarchar(1000) = '',
    @WHENIAMATSCHOOLILIKELEARNING nvarchar(1000) = '',
    @SOMEDAYI nvarchar(1000) = '',
    @TWOMOSTFAVORITETHINGS nvarchar(1000) = '',
    @OTHERTHINGSTHECHILDENJOYS nvarchar(1000) = '',
    @CHILDPERSONALITY nvarchar(1000) = '',
    @CHILDHEALTH nvarchar(1000) = '',
    @SPIRITUALDEVELOPMENT nvarchar(1000) = '',
    @ATTENDINGSCHOOL bit = null,
    @REASONNOTATTENDINGSCHOOL nvarchar(255) = '',
    @CLASSLEVEL nvarchar(20) = '',
    @FAVORITESUBJECT nvarchar(1000) = '',
    @VOCATIONALSKILLS nvarchar(1000) = '',
    @ADDITIONALCHILDINFORMATION nvarchar(max) = ''
)
as

set nocount on;

--if @ID is null
--    set @ID = newid()

if @CHANGEAGENTID is null  
    exec dbo.USP_CHANGEAGENT_GETORCREATECHANGEAGENT @CHANGEAGENTID output

declare @CURRENTDATE datetime
set @CURRENTDATE = getdate()

begin try
	-- handle inserting the data
	insert into dbo.USR_CHILDEXTENSION
		(
    ID, 
    SPONSORSHIPOPPORTUNITYCHILDID, 
    PROGRAMCOMPLETIONDATE, 
    NUMBEROFSISTERS, 
    NUMBEROFBROTHERS, 
    CHILDLIVESWITHCODEID, 
    FATHERWORKSASCODEID, 
    MOTHERWORKSASCODEID,
    CAREGIVERRELATIONCODEID,
    CAREGIVERREASONCODEID,
    BIRTHDATEACCURACYCODEID,
    FATHERWORKSASOTHER,
    MOTHERWORKSASOTHER,
    CAREGIVERRELATIONOTHER,
    CAREGIVERWORKSASCODEID,
    CAREGIVERWORKSASOTHER,
    REASONFORCAREGIVEROTHER,
    HOUSINGWALLSTRUCTURECODEID,
    HOUSINGWALLSTRUCTUREOTHER,
    HOUSINGROOFINGMATERIALCODEID,
    HOUSINGROOFINGMATERIALOTHER,
    WATERSOURCECODEID,
    WATERSOURCEOTHER,
    COOKINGSOURCECODEID,
    COOKINGSOURCEOTHER,
    LIGHTSOURCECODEID,
    LIGHTSOURCEOTHER,
    AREADESCRIPTION,
    MYFAVORITETHINGTODO,
    WHENIPLAYWITHFRIENDSWE,
    WHENATHOMEIHELPOUTBY,
    WHENITALKTOGODIASKHIM,
    WHENIAMATSCHOOLILIKELEARNING,
    SOMEDAYI,
    TWOMOSTFAVORITETHINGS,
    OTHERTHINGSTHECHILDENJOYS,
    CHILDPERSONALITY,
    CHILDHEALTH,
    SPIRITUALDEVELOPMENT,
    ATTENDINGSCHOOL,
    REASONNOTATTENDINGSCHOOL,
    CLASSLEVEL,
    FAVORITESUBJECT,
    VOCATIONALSKILLS,
    ADDITIONALCHILDINFORMATION,
    ADDEDBYID, 
    CHANGEDBYID, 
    DATEADDED, 
    DATECHANGED
    )
    values
		(
    @SPONSORSHIPOPPORTUNITYCHILDID, 
    @SPONSORSHIPOPPORTUNITYCHILDID, 
    @PROGRAMCOMPLETIONDATE, 
    @NUMBEROFSISTERS, 
    @NUMBEROFBROTHERS, 
    @CHILDLIVESWITHCODEID, 
    @FATHERWORKSASCODEID, 
    @MOTHERWORKSASCODEID,
    @CAREGIVERRELATIONCODEID,
    @CAREGIVERREASONCODEID,
    @BIRTHDATEACCURACYCODEID,
    @FATHERWORKSASOTHER,
    @MOTHERWORKSASOTHER,
    @CAREGIVERRELATIONOTHER,
    @CAREGIVERWORKSASCODEID,
    @CAREGIVERWORKSASOTHER,
    @REASONFORCAREGIVEROTHER,
    @HOUSINGWALLSTRUCTURECODEID,
    @HOUSINGWALLSTRUCTUREOTHER,
    @HOUSINGROOFINGMATERIALCODEID,
    @HOUSINGROOFINGMATERIALOTHER,
    @WATERSOURCECODEID,
    @WATERSOURCEOTHER,
    @COOKINGSOURCECODEID,
    @COOKINGSOURCEOTHER,
    @LIGHTSOURCECODEID,
    @LIGHTSOURCEOTHER,
    @AREADESCRIPTION,
    @MYFAVORITETHINGTODO,
    @WHENIPLAYWITHFRIENDSWE,
    @WHENATHOMEIHELPOUTBY,
    @WHENITALKTOGODIASKHIM,
    @WHENIAMATSCHOOLILIKELEARNING,
    @SOMEDAYI,
    @TWOMOSTFAVORITETHINGS,
    @OTHERTHINGSTHECHILDENJOYS,
    @CHILDPERSONALITY,
    @CHILDHEALTH,
    @SPIRITUALDEVELOPMENT,
    @ATTENDINGSCHOOL,
    @REASONNOTATTENDINGSCHOOL,
    @CLASSLEVEL,
    @FAVORITESUBJECT,
    @VOCATIONALSKILLS,
    @ADDITIONALCHILDINFORMATION,
    @CHANGEAGENTID, 
    @CHANGEAGENTID, 
    @CURRENTDATE, 
    @CURRENTDATE
    )
	
end try

begin catch
    exec dbo.USP_RAISE_ERROR
    return 1
end catch

return 0				
				]]>
      </common:CreateProcedureSQL>
    </SaveImplementation>
  </SPDataForm>

  <!-- describe the context ID for this form (if applicable), which corresponds to a parameter in the SP. -->
  <Context ContextRecordType="Sponsorship Opportunity Child" RecordIDParameter="SPONSORSHIPOPPORTUNITYCHILDID" />

  <!-- describe fields on the form, which correspond to parameters on the SP.  Note that system parameters 
	like the context @ID, @CONTEXTID, and @CURRENTAPPUSERID need not be listed. -->
  <common:FormMetaData FixedDialog="true">
    <common:FormFields>
      <common:FormField FieldID="PROGRAMCOMPLETIONDATE" Caption="Program Completion Date" DataType="Date" />
      <common:FormField FieldID="NUMBEROFSISTERS" Caption="Number of Sisters" DataType="TinyInt" />
      <common:FormField FieldID="NUMBEROFBROTHERS" Caption="Number of Brothers" DataType="TinyInt" />

      <common:FormField FieldID="BIRTHDATEACCURACYCODEID" Caption="Birthdate Accuracy" DataType="Guid">
        <common:CodeTable CodeTableName="USR_BIRTHDATEACCURACYCODE" />
      </common:FormField>

      <common:FormField FieldID="CHILDLIVESWITHCODEID" Caption="Child Lives With" DataType="Guid">
        <common:CodeTable CodeTableName="USR_CHILDLIVESWITHCODE" />
      </common:FormField>

      <common:FormField FieldID="FATHERWORKSASCODEID" Caption="Father Works As" DataType="Guid">
        <common:CodeTable CodeTableName="USR_FATHERWORKSASCODE" />
      </common:FormField>
      <common:FormField FieldID="FATHERWORKSASOTHER" Caption="Father Works As other value" DataType="String" />

      <common:FormField FieldID="MOTHERWORKSASCODEID" Caption="Mother Works As" DataType="Guid">
        <common:CodeTable CodeTableName="USR_MOTHERWORKSASCODE" />
      </common:FormField>
      <common:FormField FieldID="MOTHERWORKSASOTHER" Caption="Mother Works As other value" DataType="String" />

      <common:FormField FieldID="CAREGIVERRELATIONCODEID" Caption="Caregiver Relation" DataType="Guid">
        <common:CodeTable CodeTableName="USR_CAREGIVERRELATIONCODE" />
      </common:FormField>
      <common:FormField FieldID="CAREGIVERRELATIONOTHER" Caption="Caregiver Relation other value" DataType="String" />

      <common:FormField FieldID="CAREGIVERWORKSASCODEID" Caption="Caregiver Works As" DataType="Guid">
        <common:CodeTable CodeTableName="USR_CAREGIVERWORKSASCODE" />
      </common:FormField>
      <common:FormField FieldID="CAREGIVERWORKSASOTHER" Caption="Caregiver Works As other value" DataType="String" />

      <common:FormField FieldID="CAREGIVERREASONCODEID" Caption="Reason for Caregiver" DataType="Guid">
        <common:CodeTable CodeTableName="USR_CAREGIVERREASONCODE" />
      </common:FormField>
      <common:FormField FieldID="REASONFORCAREGIVEROTHER" Caption="Caregiver Reason other value" DataType="String" />

      <common:FormField FieldID="HOUSINGWALLSTRUCTURECODEID" Caption="Housing Wall Structure" DataType="Guid">
        <common:CodeTable CodeTableName="USR_HOUSINGWALLSTRUCTURECODE" />
      </common:FormField>
      <common:FormField FieldID="HOUSINGWALLSTRUCTUREOTHER" Caption="Wall Structure other value" DataType="String" />

      <common:FormField FieldID="HOUSINGROOFINGMATERIALCODEID" Caption="Housing Roof Structure" DataType="Guid">
        <common:CodeTable CodeTableName="USR_HOUSINGROOFINGMATERIALCODE" />
      </common:FormField>
      <common:FormField FieldID="HOUSINGROOFINGMATERIALOTHER" Caption="Roof Structure other value" DataType="String" />

      <common:FormField FieldID="WATERSOURCECODEID" Caption="Water Source" DataType="Guid">
        <common:CodeTable CodeTableName="USR_WATERSOURCECODE" />
      </common:FormField>
      <common:FormField FieldID="WATERSOURCEOTHER" Caption="Water Source other value" DataType="String" />

      <common:FormField FieldID="COOKINGSOURCECODEID" Caption="Cooking Source" DataType="Guid">
        <common:CodeTable CodeTableName="USR_COOKINGSOURCECODE" />
      </common:FormField>
      <common:FormField FieldID="COOKINGSOURCEOTHER" Caption="Cooking Source other value" DataType="String" />

      <common:FormField FieldID="LIGHTSOURCECODEID" Caption="Light Source" DataType="Guid">
        <common:CodeTable CodeTableName="USR_LIGHTSOURCECODE" />
      </common:FormField>
      <common:FormField FieldID="LIGHTSOURCEOTHER" Caption="Light Source other value" DataType="String" />

      <common:FormField FieldID="AREADESCRIPTION" Caption="Area Description" DataType="String" Required="false" />

      <common:FormField FieldID="MYFAVORITETHINGTODO" Caption="Favorite thing" DataType="String" Required="false" />

      <common:FormField FieldID="WHENIPLAYWITHFRIENDSWE" Caption="Playing with friends text" DataType="String" Required="false" />

      <common:FormField FieldID="WHENATHOMEIHELPOUTBY" Caption="Help out at home text" DataType="String" Required="false" />

      <common:FormField FieldID="WHENITALKTOGODIASKHIM" Caption="Prayer text" DataType="String" Required="false" />

      <common:FormField FieldID="WHENIAMATSCHOOLILIKELEARNING" Caption="School likes" DataType="String" Required="false" />

      <common:FormField FieldID="SOMEDAYI" Caption="Dreams of future text" DataType="String" Required="false" />

      <common:FormField FieldID="TWOMOSTFAVORITETHINGS" Caption="Two Favorite Things Text" DataType="String" Required="false" />

      <common:FormField FieldID="OTHERTHINGSTHECHILDENJOYS" Caption="Other Likes Text" DataType="String" Required="false" />

      <common:FormField FieldID="CHILDPERSONALITY" Caption="Personality" DataType="String" Required="false" />

      <common:FormField FieldID="CHILDHEALTH" Caption="Health" DataType="String" Required="false" />

      <common:FormField FieldID="SPIRITUALDEVELOPMENT" Caption="Spiritual Development Text" DataType="String" Required="false" />

      <common:FormField FieldID="ATTENDINGSCHOOL" Caption="Attending School" DataType="Boolean" Required="false" />

      <common:FormField FieldID="REASONNOTATTENDINGSCHOOL" Caption="Reason Not Attending School" DataType="String" Required="false" />

      <common:FormField FieldID="CLASSLEVEL" Caption="Class Level" DataType="String" Required="false" />

      <common:FormField FieldID="FAVORITESUBJECT" Caption="Favorite Subject" DataType="String" Required="false" />

      <common:FormField FieldID="VOCATIONALSKILLS" Caption="Vocation Skills" DataType="String" Required="false" />

      <common:FormField FieldID="ADDITIONALCHILDINFORMATION" Caption="Additional Info" DataType="String" Required="false" />

      <common:FormField FieldID="SPONSORSHIPOPPORTUNITYCHILDID" ReadOnly="true" Hidden="true" Caption="SPONSORSHIPOPPORTUNITYCHILDID" DataType="Guid" />
    </common:FormFields>

    <common:WebUIComponent>
      <common:UIModel AssemblyName="MoM.Sponsorship.Child.UIModel.dll" ClassName="MoM.Sponsorship.Child.UIModel.ChildExtensionsAddDataFormUIModel" />
      <common:WebUI>
        <common:ExternalResource Url="browser/htmlforms/custom/ChildExtensionsAddDataForm.html" />
      </common:WebUI>
    </common:WebUIComponent>


    <!--<common:FieldGroups>
      <common:FieldGroup Caption="CCH BPR Data" ID="CCH_BPR_DATA">
        <common:Fields>
          <common:Field>PROGRAMCOMPLETIONDATE</common:Field>
          <common:Field>NUMBEROFSISTERS</common:Field>
          <common:Field>NUMBEROFBROTHERS</common:Field>
        </common:Fields>
      </common:FieldGroup>
      <common:FieldGroup Caption="Profile Information" ID="PROFILEINFO">
        <common:Fields>
          <common:Field>AREADESCRIPTION</common:Field>
          <common:Field>MYFAVORITETHINGTODO</common:Field>
          <common:Field>WHENIPLAYWITHFRIENDSWE</common:Field>
        </common:Fields>
      </common:FieldGroup>
    </common:FieldGroups>-->

    <!-- indicate the client-side component for the user interface -->
    <!--<common:formuicomponent formuicomponenttype="customcomponent">
      <common:customcomponentid assemblyname="blackbaud.appfx.sponsorship.clientcomponents" classname="blackbaud.appfx.sponsorship.clientcomponents.sponsorshipopportunityaddchild" />
    </common:formuicomponent>-->

  </common:FormMetaData>


  <!-- Extending the Sponsorship Opportunity Child Add Data Form id 83DD7777-BA21-4CD1-A2CB-C5BFE3F2DA35 -->
  <common:DataFormExtension DataFormInstanceID="83DD7777-BA21-4CD1-A2CB-C5BFE3F2DA35" RenderStyle="Tab" TabCaption="CCH BPR Data" />



</AddDataFormTemplateSpec>