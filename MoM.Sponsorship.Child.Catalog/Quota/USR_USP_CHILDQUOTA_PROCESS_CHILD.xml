<SQLStoredProcedureSpec
	xmlns="bb_appfx_sqlstoredprocedure"
	xmlns:common="bb_appfx_commontypes" 
	ID="f268f6ac-6069-48a6-997e-0780af7d5313"
	Name="USR_USP_CHILDQUOTA_PROCESSCHILDREN"
	Description="REPLACE_WITH_DESCRIPTION"
	Author="Cary Mayeda"
	SPName="USR_USP_CHILDQUOTA_PROCESS_CHILD"
	>
	
	<!-- 
	Remarks:    

	History:
	Date            Modified By     Comments
	02-Jul-2012		CMayeda			Initial Version
	-->

	<CreateProcedureSQL>
		<![CDATA[
create procedure dbo.USR_USP_CHILDQUOTA_PROCESS_CHILD(
	@sponsorshipOpportunityChildID uniqueidentifier,	-- Child ID,
	@locked bit,										-- Whether or not the child's project / country was successfully locked
	@changeAgentID uniqueidentifier						-- Used to specify change agent for ChangedByID and AddedByID fields	
)

as
begin
	-- Get ChangeAgent if none was passed into the sproc
  	if @changeAgentID is null  
	    exec dbo.USP_CHANGEAGENT_GETORCREATECHANGEAGENT @changeAgentID output

	
	declare @childList dbo.USR_UDT_QUOTAPROCESSCHILDREN
	insert @childList
	select @sponsorshipOpportunityChildID, @sponsorshipOpportunityChildID, getdate()
		
	exec dbo.USR_USP_CHILDQUOTA_PROCESS_CHILDLIST @childList, @changeAgentID, '', ''

	return 0

end

		]]>
	</CreateProcedureSQL>

</SQLStoredProcedureSpec>

