<AddDataFormTemplateSpec 
	xmlns="bb_appfx_adddataformtemplate"
	xmlns:common="bb_appfx_commontypes" 
	ID="e750b19b-4dee-4e55-81e1-44c1523cea61" 
	Name="TestBatch Commit Form"
	Description="Commits the TestBatch Batch" 
	Author="memphis-PC\Administrator"
	DataFormInstanceID="9e7aea75-0cdd-49b2-87bf-807ce9173a45" 
	RecordType="BATCHTEST"
	common:SecurityUIFolder="Testing"
	>
	<common:DependencyList>
		<common:Dependency CatalogAssembly="Blackbaud.AppFx.Sponsorship.Catalog.dll" CatalogItem="Blackbaud.AppFx.Sponsorship.Catalog.SponsorshipOpportunityGroup.SimpleList.xml" />
		<common:Dependency CatalogAssembly="Blackbaud.AppFx.Sponsorship.Catalog.dll" CatalogItem="Blackbaud.AppFx.Sponsorship.Catalog.SponsorshipLocation.Search.xml" />
		<common:Dependency CatalogAssembly="Blackbaud.AppFx.Sponsorship.Catalog.dll" CatalogItem="Blackbaud.AppFx.Sponsorship.Catalog.USP_SPONSORSHIPSETTINGS_GETNEWDEFAULTS.xml" />
		<common:Dependency CatalogAssembly="Blackbaud.AppFx.Sponsorship.Catalog.dll" CatalogItem="Blackbaud.AppFx.Sponsorship.Catalog.SponsorshipOpportunityGroupInfo.DataList.xml" />
		<common:Dependency CatalogAssembly="Blackbaud.AppFx.Sponsorship.Catalog.dll" CatalogItem="Blackbaud.AppFx.Sponsorship.Catalog.SponsorshipProgramAgeRangeInfo.DataList.xml" />
	</common:DependencyList>
	
	
	<SPDataForm>
		<!-- describe the save SP -->
		<SaveImplementation SPName="USP_DATAFORMTEMPLATE_ADD_BATCHTESTCOMMIT">
			<common:CreateProcedureSQL>
				<![CDATA[
create procedure dbo.USP_DATAFORMTEMPLATE_ADD_BATCHTESTCOMMIT
(
		@ID uniqueidentifier = null output,
	@VALIDATEONLY bit = 0,
	@CHANGEAGENTID uniqueidentifier = null,
	@SPONSORSHIPLOCATIONID uniqueidentifier = null,
	@TESTNAME nvarchar(200) = '',
	@TESTFLAG bit = 0,
	@TESTDESCRIPTION nvarchar(100) = ''
)
as

set nocount on;

if @ID is null
		set @ID = newid()

if @CHANGEAGENTID is null  
		exec dbo.USP_CHANGEAGENT_GETORCREATECHANGEAGENT @CHANGEAGENTID output

declare @CURRENTDATE datetime
set @CURRENTDATE = getdate()

begin try
	-- handle inserting the data
	insert into dbo.USR_TESTINGONLY
		(ID, TESTNAME, TESTFLAG, TESTDESCRIPTION, SPONSORSHIPLOCATIONID, ADDEDBYID, CHANGEDBYID, DATEADDED, DATECHANGED)
		values
		(@ID, @TESTNAME, @TESTFLAG, @TESTDESCRIPTION, @SPONSORSHIPLOCATIONID, @CHANGEAGENTID, @CHANGEAGENTID, @CURRENTDATE, @CURRENTDATE)
	
end try

begin catch
		exec dbo.USP_RAISE_ERROR
		return 1
end catch

return 0				
				]]>
			</common:CreateProcedureSQL>
		</SaveImplementation>
	</SPDataForm>

	<!-- describe the context ID for this form (if applicable), which corresponds to a parameter in the SP. -->
	<!--<Context ContextRecordType="REPLACE_WITH_RECORDTYPE" RecordIDParameter="CONTEXTID"/>-->

	<!-- describe fields on the form, which correspond to parameters on the SP.  Note that system parameters 
	like the context @ID, @CONTEXTID, and @CURRENTAPPUSERID need not be listed. -->
	<common:FormMetaData FixedDialog="true">
		<common:FormFields>
			<common:FormField FieldID="VALIDATEONLY" DataType="Boolean" Caption="Validate only" />
			<!--<common:FormField FieldID="SEQUENCE" Required="true" Hidden="true" Caption="Sequence" />-->
			<common:FormField FieldID="TESTNAME" Description="Name" MaxLength="200" DataType="String" Required="true" />
			<common:FormField FieldID="SPONSORSHIPLOCATIONID" DataType="Guid" Required="true" Caption="Location" CaptionResourceKey="$$location">
				<common:SearchList SearchListID="7d7ac450-86f7-42f7-9299-e2458592ad14" EnableQuickFind="true">
					<common:FormFieldOverrides>
						<common:FormFieldOverride FieldID="INCLUDECHILDNODES" DefaultValueText="1" />
						<common:FormFieldOverride FieldID="WITHINLOCATION" Hidden="true" />
						<common:FormFieldOverride FieldID="WITHINLOCATIONDISPLAY" Hidden="true" />
					</common:FormFieldOverrides>
				</common:SearchList>
			</common:FormField>
			<common:FormField FieldID="TESTFLAG" Caption="Testing?" />
			<common:FormField FieldID="TESTDESCRIPTION" MaxLength="100" Caption="Description of Test" />
		</common:FormFields>

		<!-- indicate the client-side component for the user interface -->
		
	</common:FormMetaData>

</AddDataFormTemplateSpec>